---
title: 'M2-3: Advanced network analysis'
author: "Daniel S. Hain (dsh@business.aau.dk)"
date: "Updated `r format(Sys.time(), '%B %d, %Y')`"
output:
  html_document:
    code_folding: hide
    df_print: paged
    toc: true
    toc_depth: 2
    toc_float:
      collapsed: false
    theme: flatly
---

```{r setup, include=FALSE}
### Generic preamble
Sys.setenv(LANG = "en") # For english language
options(scipen = 5) # To deactivate annoying scientific number notation
set.seed(1337) # To have a seed defined for reproducability

### Knitr options
if (!require("knitr")) install.packages("knitr"); library(knitr) # For display of the markdown
knitr::opts_chunk$set(warning=FALSE,
                     message=FALSE,
                     fig.align="center"
                     )

### Install packages if necessary
if (!require("pacman")) install.packages("pacman") # package for loading and checking packages :)
pacman::p_load(tidyverse, # Standard datasciewnce toolkid (dplyr, ggplot2 et al.)
               magrittr, # For advanced piping (%>% et al.)
               igraph, # For network analysis
               tidygraph, # For tidy-style graph manipulation
               ggraph # For ggplot2 style graph plotting
               )
```

# Introduction

# Types of networks




# Network Visualization

## Visualize what, and why?

The main concern in designing a network visualization is the purpose it has to serve. What are the structural properties that we want to highlight? What are the key concerns we want to address?

![](https://www.dropbox.com/s/p34n0m16qx1hnhz/networks_viz_goal.png?dl=1){width=500px}

Network maps are far from the only visualization available for graphs - other network representation formats, and even simple charts of key characteristics, may be more appropriate in some cases.

![](https://www.dropbox.com/s/l7rb0v9h95jmqen/networks_viz_type.png?dl=1){width=500px}

In network maps, as in other visualization formats, we have several key elements that control the outcome. The major ones are color, size, shape, and position.

![](https://www.dropbox.com/s/da8n7n3gp48s2iu/networks_viz_controls.png?dl=1){width=500px}


## Node Visualization

```{r}
g <- as_tbl_graph(highschool)
```

```{r}
set.seed(1337)

g %>%
  ggraph(layout = "nicely") + 
    geom_point(aes(x = x, y = y))
```

```{r}
g %>% create_layout(layout = "nicely") %>% head()
```

```{r}
g %>% ggraph(layout = 'nicely') + 
  geom_node_point()
```






## Edge Visualization



## Layouts





# Multi-Modal Networks

Now its time to talk about an interesting type of networks, multi-modal. This means, a network has several "modes", meaning connects entities on different conceptual levels. The most commone one is a **2-mode** (or **bipartite**) network. Examples could be an Author $\rightarrow$ Paper, Inventor $\rightarrow$ Patent, Member $\rightarrow$ Club network. Here, the elements in the different modes represent different things. 

We can alalyse them in sepperation (and sometimes we should), but often its helpful to "project"" them onto one mode. Here, we create a node in one mode by joint association with another mode.

![](https://www.dropbox.com/s/e4vnq7kh24pyu0t/networks_2mode.png?dl=1{width=500px}

While that sounds simple, it can be a very powerful technique, as I will demonstrate now.

#

```{r}
data <- whigs %>% as_tibble()
```

```{r}
data %>% head()
```









# Case study: Bibliographic networks

## Basics

Lets talk about bibliographic networks. In short, that are networks between documents which cite each others. That can be (commonly) academic publications, but also patents or policy reports. Conceptually, we can see them as 2 mode networks, between articles and their reference. That helps us to apply some interesting metrics, such as:

* direct citations
* Bibliographic coupling
* Co--citations

Interestingly, different projections of this 2-mode network give the whole resulting 1-mode network a different meaning.



I will illustrate more in detail in the following.

## Doing it by hand

Lets imagine we do it the hard way. We download some bibliographic data, and have to do all the munging on our own, till we end up with a nice network representation. Lets go through some of these steps together.

The example is absed on some own work, which is currently under revision, but made available for you:

[Rakas, M and Hain, D, (under revision), "Innovation System Research: Where It
Came From, and What It Is Now"](https://rawgit.com/SDS-AAU/M2-2018/master/material/The_Development_of_Innovation_System_Research_RR1.pdf)

Lets get started. I will load some bibliographic data (selection process explained in the paper) on articles concerned with the field of "Innovation Studies". It already went through some upfront cleaning, but is very similar to what you get when you download data from WoS.


[^1]

## Your turn

Finally, its again time for you to have some fun. Check out this final exercise: [here](https://www.kaggle.com/danielhain/sds-2018-m2-3-nw-exercise-1).


# Endnotes

### References

[^1]: Rakas, M., & Hain, D. S. (2019). The state of innovation system research: What happens beneath the surface?. Research Policy, 45 (9). DOI: https://doi.org/10.1016/j.respol.2019.04.011


### More info
You can find more info about:

* `tidygraph` [here](https://tidygraph.data-imaginist.com/)
* `ggraph` [here](https://ggraph.data-imaginist.com/)


### Session info
```{r}
sessionInfo()
```

