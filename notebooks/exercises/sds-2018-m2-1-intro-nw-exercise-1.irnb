{"cells":[{"metadata":{"_uuid":"3fa4250aa5605496c2ac1dd0b825bf315f5c7698","_execution_state":"idle","trusted":true},"cell_type":"code","source":"library(tidyverse) # Collection of all the good stuff like dplyr, ggplot2 ect.\nlibrary(magrittr) # For extra-piping operators (eg. %<>%)\nlibrary(data.table) # Good format to work with large datasets\nlibrary(igraph) # For network analysis","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"422e95237c23f1172cef2433962309f7526c16d3"},"cell_type":"markdown","source":"Lets load our GoT co-occurence network."},{"metadata":{"trusted":true,"_uuid":"0d3c401a76db7ed13d14192db73dd37cb5f86dcd"},"cell_type":"code","source":"edges.cooc <- fread(\"../input/asoiaf-all-edges.csv\")\nnodes.cooc <- fread(\"../input/asoiaf-all-nodes.csv\")","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"5aa7e0b103036f8eea909c709685034d01fc43ca"},"cell_type":"markdown","source":"Lets go through the preprocessing pipeline till we have a graph object. Maybe we want to go a bit larger now, and look at the top-100 most connected charracters."},{"metadata":{"trusted":true,"_uuid":"154573dfaad7116c6b79405938d1084df00f39f2"},"cell_type":"code","source":"colnames(edges.cooc) <- tolower(colnames(edges.cooc))","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"5ae39ec0887fb50f7cd4135c553a0d4482879458"},"cell_type":"code","source":"chars.main <- edges.cooc %>%\n  select(-type) %>%\n  gather(x, name, source:target) %>%\n  group_by(name) %>%\n  summarise(sum_weight = sum(weight)) %>%\n  ungroup() %>%\n  arrange(desc(sum_weight)) %>%\n  top_n(100)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"0e0ef996032727318463f991458c50c1e6a92f7f"},"cell_type":"code","source":"edges.cooc  %<>%\n  filter(source %in% chars.main$name & target %in% chars.main$name) %>%\n  select(source, target, weight)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"372fea258a3d534a0cfa40e7bdff18e30f603bec"},"cell_type":"markdown","source":"Almost done. Some little things to do. Can you join the `chars.main` dataframe (or another clever procedure) to also have the labels. We might need them later."},{"metadata":{"trusted":true,"_uuid":"218508a2f133b1703ee886104775fd639dfa5cdc"},"cell_type":"code","source":"","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"ae8ed077c34f3acbd1ffa81491ae37dae242fee7"},"cell_type":"markdown","source":"Finaly, create the graph object. Now you can also pass the nodeset to the graph, to have the labels as node-characteristics."},{"metadata":{"trusted":true,"_uuid":"ca19dd708f0d165977275083b93679e7f6de43af"},"cell_type":"code","source":"degree.d","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"7308e6a4394455c7ea0197b29aa453547570804a"},"cell_type":"markdown","source":"Now, let us get some overal graph statistics. What is the degree density, tranistivity, and so forth? You can also take a look at the `degree_distribution()`. Are the stats differnt from the graph we created before? Any ideas why?"},{"metadata":{"trusted":true,"_uuid":"b4ca49bb816e0110764a28c93473c717ce93bea4"},"cell_type":"code","source":"","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"1e1f107c4d723a37951508d7c1b445679a26049e"},"cell_type":"markdown","source":"Lets do some detailed analysis. In the joint ego-network of Danny & John Snow, who is the character with the highest betweenness centrality. "},{"metadata":{"trusted":true,"_uuid":"c9aa62dc94c9240a9a2143edc9eaf12bde9da3fc"},"cell_type":"code","source":"","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"16bc74fd451fbed5874673d998f7d5e2f52a5798"},"cell_type":"markdown","source":"One more thing: Do you think you could prepare a nice summary dataframe, with the most importand network indicators of all nodes (characters) together?"},{"metadata":{"trusted":true,"_uuid":"df0bd02d361eac731fadf1d7613aeaf0c70a7570"},"cell_type":"code","source":"","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"b9ab4b31ea78dead96a9621b63e2ec9c0e2c0182"},"cell_type":"markdown","source":"Finally, just play around for a moment and have fun :). Do you find anything interesting that further helps us figuring out what will happen in S7?"},{"metadata":{"trusted":true,"_uuid":"b91ca3efe4ef1c8e07880bb84c5cbf130ad68b31"},"cell_type":"code","source":"","execution_count":null,"outputs":[]}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"3.4.2","file_extension":".r","codemirror_mode":"r"}},"nbformat":4,"nbformat_minor":1}